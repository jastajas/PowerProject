(this["webpackJsonpproject-power"]=this["webpackJsonpproject-power"]||[]).push([[0],{23:function(e,t,n){e.exports=n.p+"static/media/arrow.c317b9c2.svg"},24:function(e,t,n){e.exports=n.p+"static/media/user.209f1cd7.svg"},48:function(e,t,n){e.exports=n.p+"static/media/main.9f46ca12.jpg"},49:function(e,t,n){e.exports=n.p+"static/media/duration.4687d6cb.svg"},50:function(e,t,n){e.exports=n.p+"static/media/toDo.fdc1b07c.svg"},51:function(e,t,n){e.exports=n.p+"static/media/inProgress.33699397.svg"},52:function(e,t,n){e.exports=n.p+"static/media/done.32ea9380.svg"},53:function(e,t,n){e.exports=n.p+"static/media/rocket.bc67068e.svg"},54:function(e,t,n){e.exports=n.p+"static/media/upload.71cfd92a.svg"},56:function(e,t,n){e.exports=n(99)},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},85:function(e,t){},87:function(e,t){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(45),i=n.n(s),l=(n(61),n(1)),o=n(2),c=n(6),u=n(3),m=n(5),p=n(35),f=(n(62),n(10)),d=n(23),h=n.n(d),E=(n(63),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isExtended:!1},n.handleClickButton=function(){var e=!n.state.isExtended;n.setState({isExtended:e})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.isExtended?90:270;return r.a.createElement("aside",{className:"chartNav"},r.a.createElement("button",{onClick:this.handleClickButton},r.a.createElement("img",{src:h.a,alt:"",style:{transform:"rotate(".concat(e,"deg)")}})),r.a.createElement("nav",{style:{width:this.state.isExtended?"200px":"0px"}},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(f.c,{className:"navElement",to:"/kanban"},r.a.createElement("p",null,"kanban"))),r.a.createElement("li",null,r.a.createElement(f.c,{className:"navElement",to:"/list"},r.a.createElement("p",null,"task list"))),r.a.createElement("li",null,r.a.createElement(f.c,{className:"navElement",to:"/gantt"},r.a.createElement("p",null,"gantt"))))))}}]),t}(r.a.Component)),g=n(11),v=(n(68),n(24)),k=n.n(v),b=function(e){var t=e.task,n=t.complexName,a=t.resources,s=t.start,i=t.end,l=t.status,o=t.id,c=function(e){var t=null;switch(e){case"done":t="rgb(114, 161, 118)";break;case"to do":t="rgb(138, 60, 60)";break;case"in progress":t="rgb(218, 206, 144)";break;default:t="transparent"}return{borderLeft:"solid ".concat(t," 10px")}}(l),u=a.length?r.a.createElement("div",{key:a[0].id,className:"taskOwner",onMouseOver:function(t){return e.activateToolTip(t,o)},onMouseOut:e.disactivateToolTip},r.a.createElement("img",{src:k.a,alt:""})," ",r.a.createElement("p",null,a[0].resource.name)," ",a.length>1&&r.a.createElement("p",null," ...")):r.a.createElement("p",null,"-"),m=n.map((function(e,t){return r.a.createElement("p",{key:t},e)}));return r.a.createElement("div",{className:"kanbanTail",style:c},r.a.createElement("h5",null,m),r.a.createElement("div",null,u),r.a.createElement("div",null,r.a.createElement("p",null,"Start Date:"," ",s),r.a.createElement("p",null,"Deadline:"," ",i)))},T=(n(69),function(e){var t=e.kanbanTasks.map((function(t){return r.a.createElement(b,{key:t.id,task:t,activateToolTip:e.activateToolTip,disactivateToolTip:e.disactivateToolTip})}));return r.a.createElement("div",{className:"kanbanBox"},r.a.createElement("div",{className:"headerKanban"},r.a.createElement("h3",{className:""},e.name),r.a.createElement("p",{className:"tailCounter"},t.length)),r.a.createElement("div",{className:"kanbanList"},t))}),x=(n(70),n(71),function(e){var t=e.resources,n=t.slice(1,t.length).map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"resourceElement",key:e.resource.id},r.a.createElement("img",{src:k.a,alt:""})," ",r.a.createElement("p",null,e.resource.name)))})),a={top:e.yPosition,left:e.xPosition};return r.a.createElement("div",{style:a,className:"toolTipResource"},n)}),y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={resourceInfo:null},n.activateToolTip=function(e,t){var a=e.clientY,r=e.clientX;n.setState({resourceInfo:{taskId:t,positionX:r,positionY:a}})},n.disactivateToolTip=function(){n.setState({resourceInfo:null})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[],n=null,a=null,s=null;if(this.props.tasks.length&&(n=this.props.tasks.filter((function(e){return"to do"===e.status&&e.isFinal})),a=this.props.tasks.filter((function(e){return"in progress"===e.status&&e.isFinal})),s=this.props.tasks.filter((function(e){return"done"===e.status&&e.isFinal})),this.state.resourceInfo)){var i=this.props.tasks.findIndex((function(t){return t.id===e.state.resourceInfo.taskId}));t=this.props.tasks[i].resources}return this.props.tasks.length>0&&r.a.createElement("div",{className:"kanbanBoard"},r.a.createElement(T,{name:"to do",kanbanTasks:n,activateToolTip:this.activateToolTip,disactivateToolTip:this.disactivateToolTip}),r.a.createElement(T,{name:"in progress",kanbanTasks:a,activateToolTip:this.activateToolTip,disactivateToolTip:this.disactivateToolTip}),r.a.createElement(T,{name:"done",kanbanTasks:s,activateToolTip:this.activateToolTip,disactivateToolTip:this.disactivateToolTip}),t.length>1?r.a.createElement(x,{id:"toolTip",resources:t,xPosition:this.state.resourceInfo.positionX,yPosition:this.state.resourceInfo.positionY}):null)}}]),t}(r.a.Component),C=(n(72),n(73),function(e){var t=e.task,n=t.x,a=t.y,s=t.width,i=t.name,l=e.ganttConfig,o=l.taskHeight,c=l.innerGapSize,u=l.taskDescriptionSize,m=l.xOffset,p=l.yOffset,f=a+o+c+12,d=n+5;return r.a.createElement(r.a.Fragment,null,r.a.createElement("rect",{className:"gantTask",x:n+m,y:a+p,width:s,height:o}),r.a.createElement("text",{className:"gantTaskDescription",y:f+p,x:d+m,width:"auto",fontSize:u},i))}),N=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"getMinTaskTimeValue",value:function(e){var t=this;return e.map((function(e){return e.start})).map((function(e){return t.dateToMilliseconds(e)})).reduce((function(e,t){return e<t?e:t}))}},{key:"getMaxTaskTimeValue",value:function(e){var t=this;return e.map((function(e){return e.end})).map((function(e){return t.dateToMilliseconds(e)})).reduce((function(e,t){return e>t?e:t}))}},{key:"dateToMilliseconds",value:function(e){var t=e.split(".").reverse().join("/");return Date.parse(t)}},{key:"getSimplifyDate",value:function(e){return new Date(e).toISOString().substring(0,10)}}]),e}(),w=function(e,t){var n=N.getMaxTaskTimeValue(e),a=N.getMinTaskTimeValue(e),r=t.ganttCanvaWidth/(n-a),s=t.taskHeight+t.taskDescriptionSize+t.gapSize+t.innerGapSize;return e.filter((function(e){return e.isFinal})).map((function(e,t){return function(e,t,n,a,r){var s=e.start,i=e.end,l=e.complexName,o=a?a*r:a,c=N.dateToMilliseconds(i)*n-N.dateToMilliseconds(s)*n;return c=c||1,{x:(N.dateToMilliseconds(e.start)-t)*n,y:o,width:c,name:l.join(" / ")}}(e,a,r,t,s)}))},O=function(e){var t=N.getMaxTaskTimeValue(e)-N.getMinTaskTimeValue(e);return t<=10368e6?1800:1800+1800/10368e6*(t-10368e6)},j=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).zoomScope=[.1,.25,.5,.75,1,1.25,1.5,2,3],n.state={nominalWidth:n.props.tasks.length&&O(n.props.tasks),zoom:1},n.handleZoomChange=function(e){var t=e.target.value;n.setState({zoom:t})},n.ganttConfig={ganttCanvaWidth:n.state.nominalWidth*n.state.zoom,taskHeight:15,innerGapSize:2,taskDescriptionSize:14,gridDatesSize:10,gapSize:15,xOffset:30,yOffset:50,daysGrid:5},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.tasks.length&&O(this.props.tasks);n!==t.nominalWidth&&this.setState({nominalWidth:n,zoom:1})}},{key:"render",value:function(){var e=this;this.ganttConfig.ganttCanvaWidth=this.state.nominalWidth*this.state.zoom<1800?1800:this.state.nominalWidth*this.state.zoom;var t=this.zoomScope.map((function(e){return r.a.createElement("option",{value:e},e)})),n=0,a=null,s=null,i=null;return this.props.tasks.length&&(n=this.props.tasks.filter((function(e){return e.isFinal})).length*(this.ganttConfig.taskHeight+this.ganttConfig.taskDescriptionSize+this.ganttConfig.innerGapSize+this.ganttConfig.gapSize),a=(a=w(this.props.tasks,this.ganttConfig)).map((function(t){return r.a.createElement(C,{task:t,ganttConfig:e.ganttConfig})})),s=function(e,t,n){for(var a=e.daysGrid,s=e.ganttCanvaWidth,i=e.xOffset,l=864e5*a*2,o=[t],c=n-864e5*a*2,u=t;u<=c;u+=l)o.push(u+l);var m=(s+200)/(n-t);return o.map((function(e){return r.a.createElement("rect",{className:"gantGrid",x:(e-t)*m+i,y:"0",width:864e5*a*m,height:"100%"})}))}(this.ganttConfig,N.getMinTaskTimeValue(this.props.tasks),N.getMaxTaskTimeValue(this.props.tasks)),i=function(e,t,n){for(var a=e.daysGrid,s=e.ganttCanvaWidth,i=e.xOffset,l=e.gridDatesSize,o=864e5*a,c=[t],u=n-864e5*a,m=t;m<=u;m+=o)c.push(m+o);var p=(s+200)/(n-t);return c.map((function(e,n){return r.a.createElement("text",{className:"gantGrid-date",x:(e-t)*p+i,y:"10",width:"auto",fontSize:l},N.getSimplifyDate(e))}))}(this.ganttConfig,N.getMinTaskTimeValue(this.props.tasks),N.getMaxTaskTimeValue(this.props.tasks))),r.a.createElement("section",{className:"gantt-chart"},r.a.createElement("svg",{width:this.ganttConfig.ganttCanvaWidth+200,height:"50px",className:"ganttCanvaHeader"},i||!1),r.a.createElement("svg",{width:this.ganttConfig.ganttCanvaWidth+200,height:n,className:"ganttCanva"},s||!1,a||!1),r.a.createElement("select",{className:"zoomSelection",name:"zoom",value:this.state.zoom,onChange:function(t){return e.handleZoomChange(t)}},t))}}]),t}(r.a.Component),I=function(e){var t=null;switch(e){case"done":t="rgb(139, 204, 143)";break;case"to do":t="rgb(204, 139, 139)";break;case"in progress":t="rgb(242, 238, 153)";break;default:t="transparent"}return{backgroundColor:t}},S=function(e){var t=e.task,n=t.id,a=t.complexName,s=t.start,i=t.end,l=t.status,o=t.resources,c=t.percentComplete,u=o.length?o[0].resource.name:"-";return r.a.createElement("tr",{onDoubleClick:function(){return e.activateTaskForm(n)}},r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,a.join(" / ")),r.a.createElement("td",null,s.substring(0,10)),r.a.createElement("td",null,i.substring(0,10)),r.a.createElement("td",{style:I(l)},l),r.a.createElement("td",{style:{cursor:"default"},onMouseOver:function(t){e.activateToolTip(t,n)},onMouseOut:e.disactivateToolTip},u+(o.length>1?" ...":"")),r.a.createElement("td",{onDoubleClick:function(e){return e.stopPropagation()}},c))},F=(n(74),n(75),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={task:{id:n.props.task.id,name:n.props.task.name,start:n.props.task.start,finish:n.props.task.end,outlineNumber:"",outlineLevel:"",resources:n.props.task.resources,percentComplete:n.props.task.percentComplete,status:n.props.task.status},newResource:{newEffort:0,newResourceId:null}},n.messages={name:"",start:"",finish:n.props.task.end,outlineNumber:"",outlineLevel:"",resources:n.props.task.resources,percentComplete:n.props.task.percentComplete,status:n.props.task.status},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState((function(e){var t=e.task;return t[a]=r,{task:t}}))},n.handleNewResourceChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState((function(e){var t=e.newResource;return t[a]=r,{newResource:t}}))},n.addNewResource=function(){var e=n.state.newResource,t=e.newResourceId,a=e.newEffort;if(!t&&!t.length)return alert("NIE WYBRANO ZASOBU!!!");var r={resource:n.props.resources.find((function(e){return e.id===t})),work:{hours:a,minutes:0,seconds:0}};n.setState((function(e){var t=e.task;return t.resources.push(r),{task:t,newResource:{newResourceId:0,newEffort:0}}}))},n.handleResourceChange=function(e,t){var a=e.target,r=a.name,s=a.value;n.setState((function(e){var a=e.task;return a.resources=a.resources.map((function(e){return e.resource.id!==t?e:("resource"===r?e.resource=n.props.resources&&n.props.resources.find((function(e){return e.id===s})):"work"===r&&(e.work.hours=s),e)})),{task:a}}))},n.deleteResource=function(e){n.setState((function(t){var n=t.task;return n.resources=n.resources.filter((function(t){return t.resource.id!==e})),{task:n}}))},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.task,n=t.name,a=t.start,s=t.finish,i=t.resources,l=t.percentComplete,o=this.props.resources&&this.props.resources.filter((function(e){return""!==e.name})).map((function(e){return{resource:e.name+" - "+e.department,id:e.id}})).map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.resource)})),c=i.map((function(t){return r.a.createElement("div",{className:"resourceBlock"},r.a.createElement("select",{value:t.resource.id,name:"resource",onChange:function(n){return e.handleResourceChange(n,t.resource.id)}},o),r.a.createElement("input",{className:"workInput",type:"number",name:"work",step:"1",min:"0",value:t.work.hours,onChange:function(n){return e.handleResourceChange(n,t.resource.id)}}),r.a.createElement("button",{type:"button",onClick:function(){e.deleteResource(t.resource.id)}},"X"))}));return r.a.createElement("form",{className:"taskForm",style:{display:"block"}},r.a.createElement("div",{className:"taskFormChart"},r.a.createElement("h3",null,"Task Chart"),r.a.createElement("div",{className:"formElement"},r.a.createElement("label",{htmlFor:"taskNameInput"},r.a.createElement("span",null,"t"),"ask ",r.a.createElement("span",null,"n"),"ame:"),r.a.createElement("input",{id:"taskNameInput",type:"text",name:"name",value:n,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement("div",{className:"formElement"},r.a.createElement("label",{htmlFor:"startDateInput"},r.a.createElement("span",null,"s"),"tart:"),r.a.createElement("input",{id:"startDateInput",type:"date",name:"start",value:a,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement("div",{className:"formElement"},r.a.createElement("label",{htmlFor:"finishDateInput"},r.a.createElement("span",null,"e"),"nd:"),r.a.createElement("input",{id:"finishDateInput",type:"date",name:"finish",value:s,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement("div",{className:"formElement"},r.a.createElement("label",{htmlFor:"resourceInput"},r.a.createElement("span",null,"r"),"esources and efforts:"),r.a.createElement("div",{className:"resourceBlock"},r.a.createElement("select",{id:"resourceInput",name:"newResourceId",value:this.state.newResource.newResourceId,onChange:function(t){return e.handleNewResourceChange(t)}},r.a.createElement("option",{value:""},"Select..."),o),r.a.createElement("input",{id:"workInput",className:"workInput",type:"number",name:"newEffort",value:this.state.newResource.newEffort,onChange:function(t){return e.handleNewResourceChange(t)}}),r.a.createElement("button",{type:"button",onClick:this.addNewResource},"ADD")),c),r.a.createElement("div",{className:"formElement"},r.a.createElement("label",{htmlFor:"completeInput"},r.a.createElement("span",null,"c"),"ompletion:"),r.a.createElement("input",{id:"completeInput",step:"1",min:"0",max:"100",type:"number",name:"percentComplete",value:l,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement("div",{className:"formButtons"},r.a.createElement("input",{type:"submit",value:"save"}),r.a.createElement("button",{type:"button",onClick:function(){return e.props.exitTaskForm()}},"cancel"))))}}]),t}(r.a.Component)),D=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isResourceInfoActive:!1,editedTaskId:null,resourceInfo:null},n.activateToolTip=function(e,t){var a=e.clientY,r=e.clientX;n.setState({resourceInfo:{taskId:t,positionX:r,positionY:a}})},n.disactivateToolTip=function(){n.setState({resourceInfo:null})},n.handleDoubleClickRow=function(e){n.setState({editedTaskId:e})},n.exitTaskForm=function(){n.setState({editedTaskId:null})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[],n=null,a=null;if(this.props.tasks.length){n=this.props.tasks.map((function(t,n){return r.a.createElement(S,{key:t.id,task:t,index:n,activateToolTip:e.activateToolTip,disactivateToolTip:e.disactivateToolTip,activateTaskForm:e.handleDoubleClickRow})}));var s=this.state.editedTaskId&&this.props.tasks.findIndex((function(t){return t.id===e.state.editedTaskId}));if(a=s>=0&&this.props.tasks[s],this.state.resourceInfo){var i=this.props.tasks.findIndex((function(t){return t.id===e.state.resourceInfo.taskId}));t=this.props.tasks[i].resources}}return this.props.tasks.length>0&&r.a.createElement("section",{className:"taskList"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"on"),r.a.createElement("th",null,"name"),r.a.createElement("th",null,"start"),r.a.createElement("th",null,"end"),r.a.createElement("th",null,"status"),r.a.createElement("th",null,"resources"),r.a.createElement("th",null,"complete"))),r.a.createElement("tbody",null,n)),t.length>1?r.a.createElement(x,{id:"toolTip",resources:t,xPosition:this.state.resourceInfo.positionX,yPosition:this.state.resourceInfo.positionY}):null,a&&r.a.createElement(F,{task:a,exitTaskForm:this.exitTaskForm,resources:this.props.resources}))}}]),t}(r.a.Component),P=(n(76),n(77),n(48)),_=n.n(P),M=n(49),R=n.n(M),A=n(50),B=n.n(A),z=n(51),W=n.n(z),L=n(52),U=n.n(L),X=function(e){var t=null;if(e.tasks.length){var n=e.tasks.filter((function(e){return"to do"===e.status&&e.isFinal})).length,a=e.tasks.filter((function(e){return"in progress"===e.status&&e.isFinal})).length,s=e.tasks.filter((function(e){return"done"===e.status&&e.isFinal})).length,i=N.getMinTaskTimeValue(e.tasks),l=N.getMaxTaskTimeValue(e.tasks);t=r.a.createElement("div",{className:"main-page-info"},r.a.createElement("h2",null,"Project ",e.name.split(".xml")[0]),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("img",{src:R.a,alt:""}),r.a.createElement("p",null,"project duration from ",N.getSimplifyDate(i)," to ",N.getSimplifyDate(l)," ")),r.a.createElement("li",null,r.a.createElement("img",{src:B.a,alt:""}),r.a.createElement("p",null,"count task to do: ",n)),r.a.createElement("li",null,r.a.createElement("img",{src:W.a,alt:""}),r.a.createElement("p",null,"count task in progress: ",a)),r.a.createElement("li",null,r.a.createElement("img",{src:U.a,alt:""}),r.a.createElement("p",null,"count task done: ",s))))}var o=r.a.createElement("div",{className:"main-page-info"},r.a.createElement("h2",null,"no project loaded"),r.a.createElement("p",{className:"main-page-description"},"This is application for reading MS Project schedule with xml extension. Please apply project file by click button in the right up corner."));return r.a.createElement("section",{className:"main-page"},r.a.createElement("img",{className:"main-page-heroImg",src:_.a,alt:""}),t||o)},G=function(e){return r.a.createElement("section",{className:"mainChart"},r.a.createElement(g.a,{path:"/",exact:!0,render:function(){return r.a.createElement(X,e)}}),r.a.createElement(g.a,{path:"/kanban",render:function(){return r.a.createElement(y,e)}}),r.a.createElement(g.a,{path:"/gantt",render:function(){return r.a.createElement(j,e)}}),r.a.createElement(g.a,{path:"/list",render:function(){return r.a.createElement(D,e)}}))},J=(n(78),n(53)),V=n.n(J),Y=n(54),H=n.n(Y),K=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.filePath,s=t.handleFile;return r.a.createElement("div",{className:"header"},r.a.createElement(f.b,{className:"header-logo",to:"/",style:{width:"300px",height:"50px",display:"flex"}},r.a.createElement("img",{src:V.a,alt:""}),r.a.createElement("p",null,"Power Project")),r.a.createElement("p",{className:"uppercaseBold"},n?n.split(".xml")[0]:""),r.a.createElement("input",{ref:function(t){return e.inputFile=t},type:"file",accept:"text/xml",value:a,onChange:function(e){return s(e)},style:{display:"none"}}),r.a.createElement("button",{type:"button",onClick:function(){return e.inputFile.click()}},r.a.createElement("img",{src:H.a,alt:""}),r.a.createElement("p",null,"APPLY PROJECT")))}}]),t}(r.a.Component),Z=(n(79),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isExtended:!1},n.handleClickButton=function(){var e=!n.state.isExtended;n.setState({isExtended:e})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.filters,n=this.props,a=n.setFilter,s=n.resources,i=this.state.isExtended?180:0,l=s&&s.filter((function(e){return""!==e.department})).map((function(e){return e.department})).filter((function(e,t,n){return n.indexOf(e)===t&&null!==e})).map((function(e,n){return r.a.createElement("option",{key:n,value:e,selected:e===t.get("department")},e)}));return r.a.createElement("section",{className:"filters"},r.a.createElement("button",{onClick:this.handleClickButton},r.a.createElement("img",{src:h.a,alt:"arrow",style:{transform:"rotate(".concat(i,"deg)")}}),r.a.createElement("p",null,"filters")),r.a.createElement("div",{className:"filter-inputs",style:{height:this.state.isExtended?"80px":"0px"}},r.a.createElement("div",{className:"inputBox"},r.a.createElement("label",{htmlFor:"nameFilter"},"task name:"),r.a.createElement("input",{id:"nameFilter",type:"text",name:"name",onChange:a,value:t.get("name")}),r.a.createElement("button",{type:"button",onClick:function(t){return e.props.clearFilter(t)},name:"name",className:"clear-button"},"X")),r.a.createElement("div",{className:"inputBox"},r.a.createElement("label",{htmlFor:"startDateFilter"},"task start:"),r.a.createElement("input",{id:"startDateFilter",type:"date",name:"start",onChange:a,value:t.get("start")}),r.a.createElement("button",{type:"button",onClick:function(t){return e.props.clearFilter(t)},name:"start",className:"clear-button"},"X")),r.a.createElement("div",{className:"inputBox"},r.a.createElement("label",{htmlFor:"endDateFilter"},"task end:"),r.a.createElement("input",{id:"endDateFilter",type:"date",name:"end",onChange:a,value:t.get("end")}),r.a.createElement("button",{type:"button",onClick:function(t){return e.props.clearFilter(t)},name:"end",className:"clear-button"},"X")),r.a.createElement("div",{className:"inputBox"},r.a.createElement("label",{htmlFor:"personFilter"},"task owner:"),r.a.createElement("input",{id:"personFilter",type:"text",name:"person",onChange:a,value:t.get("person")}),r.a.createElement("button",{type:"button",onClick:function(t){return e.props.clearFilter(t)},name:"person",className:"clear-button"},"X")),r.a.createElement("div",{className:"inputBox"},r.a.createElement("label",{htmlFor:"departmentFilter"},"department:"),r.a.createElement("select",{id:"departmentFilter",name:"department",onChange:a,defaultValue:""},r.a.createElement("option",{value:""},"Select..."),l||!1),r.a.createElement("button",{type:"button",onClick:function(t){return e.props.clearFilter(t)},name:"department",className:"clear-button"},"X")),r.a.createElement("button",{type:"button",onClick:function(t){return e.props.clearFilter(t)},name:"all",className:"clear-all-button"},"clear all")))}}]),t}(r.a.Component)),$=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"isMsProjectStructure",value:function(e,t){var n=!0;for(var a in e){if(!e.hasOwnProperty(a)||!t.hasOwnProperty(a))return!1;if("object"===typeof e[a]&&Object.keys(e[a]).length&&(n=this.isMsProjectStructure(e[a],t[a])),!n)break}return n}},{key:"isXmlFile",value:function(e){if(e)throw new Error("No files provided!");return"text/xml"===e.type}}]),e}();$.PROJECT_OBJECT_TEMPLATE={Project:{Tasks:{Task:[]},Resources:{Resource:[]},Assignments:{}}},$.TASK_OBJECT_TEMPLATE={UID:{_text:""},Name:{_text:""},Start:{_text:""},Finish:{_text:""},OutlineNumber:{_text:""},OutlineLevel:{_text:""},PercentComplete:{_text:""}},$.RESOURCE_OBJECT_TEMPLATE={UID:{_text:""},Name:{_text:""}},$.ASSIGNMENT_OBJECT_TEMPLATE={TaskUID:{_text:""},ResourceUID:{_text:""},Work:{_text:""}};var q=$,Q=n(22),ee=n(55),te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))),Error.captureStackTrace&&Error.captureStackTrace(Object(Q.a)(n),t),n}return Object(m.a)(t,e),t}(Object(ee.a)(Error)),ne=function(e,t){var n=new FileReader;n.onload=function(e){e.target.result&&t(e.target.result)},e&&n.readAsText(e)};var ae=function(e,t,n){return e=e.map((function(e){var a=n.filter((function(t){return t.taskId===e.id&&t.resourceId>=0})).map((function(e){var n={};return n.resource=t.find((function(t){return t.id===e.resourceId})),n.work=e.work,n}));return e.resources=a,e}))},re=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r++;var s=t.find((function(e){return e.outlineNumber===n})),i=t.filter((function(e){return e.outlineNumber.startsWith(s.outlineNumber)&&e.outlineLevel===r})).map((function(n){return e(t,n.outlineNumber,[].concat(Object(p.a)(a),[s.name]),r),n}));s.isFinal=!i.length,s.complexName=i.length?null:[].concat(Object(p.a)(a),[s.name])},se=function(e){return e?new Date(e).toISOString().substring(0,10):""},ie=function(e,t){return""===t.get("person")&&""===t.get("department")||e.resources.findIndex((function(e){return e.resource.name.toUpperCase().includes(t.get("person").toUpperCase())&&e.resource.department.includes(t.get("department"))}))+1},le=function(e){var t={};return t.hours=e.split("PT")[1].split("H")[0],t.minutes=e.split("H")[1].split("M")[0],t.seconds=e.split("M")[1].split("S")[0],t},oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={file:null,tasks:[],filter:new Map},a.handleFile=function(e){if(!e.target.files)throw new TypeError("Incorrect element type!");if(!e.target.files.length)throw new Error("No files attached");var t=e.target.files[0];if(!function(e){if(!e)throw new Error("No files provided!");return"text/xml"===e.type}(t))return alert("Niew\u0142a\u015bciwy format pliku! \n Wprowad\u017a plik xml.");a.setState({file:t}),ne(t,a.handleProjctXml)},a.getTaskStatus=function(e,t){var n=Date.now(),a=Date.parse(e),r=Date.parse(t);return n<a?"to do":n>r?"done":"in progress"},a.handleProjctXml=function(e){var t=n(80);try{var r=t.xml2js(e,{compact:!0,spaces:4});if(!q.isMsProjectStructure(q.PROJECT_OBJECT_TEMPLATE,r))throw new te("It isn't MS Project file.Please select correct file.");var s=r.Project,i=s.Tasks.Task,l=s.Resources.Resource,o=s.Assignments.Assignment;i=(i=Array.isArray(i)?i:[i]).filter((function(e){return q.isMsProjectStructure(q.TASK_OBJECT_TEMPLATE,e)&&"0"!==e.UID._text})).map((function(e){return{id:e.UID._text,name:e.Name._text,start:se(e.Start._text),end:se(e.Finish._text),status:a.getTaskStatus(e.Start._text,e.Finish._text),outlineNumber:e.OutlineNumber._text,outlineLevel:parseInt(e.OutlineLevel._text),mainOutlineNo:parseInt(e.OutlineNumber._text.split(".")[0]),percentComplete:e.PercentComplete._text}})),l=(l=Array.isArray(l)?l:[l]).filter((function(e){return q.isMsProjectStructure(q.RESOURCE_OBJECT_TEMPLATE,e)})).map((function(e){return{id:e.UID._text,name:e.Name._text,department:e.Group?e.Group._text:""}})),o=o||[],o=(o=Array.isArray(o)?o:[o]).filter((function(e){return q.isMsProjectStructure(q.ASSIGNMENT_OBJECT_TEMPLATE,e)})).map((function(e){return{taskId:e.TaskUID._text,resourceId:e.ResourceUID._text,work:le(e.Work._text)}})),(i=ae(i,l,o)).filter((function(e){return 1===e.outlineLevel})).forEach((function(e){return re(i,e.outlineNumber)})),a.setState((function(){return{tasks:i,resources:l}}))}catch(c){alert(c.message),alert(c.name),console.log(c.stack)}},a.handleFilter=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){var t=e.filter;return t.set(n,r),{filter:t}}))},a.clearFilter=function(e){var t=e.target.name;"all"!==t?a.setState((function(e){var n=e.filter;return n.set(t,""),{filter:n}})):a.getDefaultFilters()},a.getDefaultFilters=function(){a.setState((function(e){var t=e.filter;return t.set("name",""),t.set("person",""),t.set("start",""),t.set("end",""),t.set("department",""),{filter:t}}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getDefaultFilters()}},{key:"render",value:function(){var e=this,t=this.state.tasks.filter((function(e){return e.complexName})).filter((function(t){return function(e,t){return e.complexName.findIndex((function(e){return e.toUpperCase().includes(t.get("name").toUpperCase())}))+1&&e.start.includes(t.get("start"))&&e.end.includes(t.get("end"))&&ie(e,t)}(t,e.state.filter)}));return r.a.createElement(f.a,{basename:"/PowerProject"},r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(K,{handleFile:this.handleFile,name:this.state.file?this.state.file.name:null,filePath:this.state.filePath})),r.a.createElement("main",null,r.a.createElement("section",{className:"mainSection"},r.a.createElement(Z,{setFilter:this.handleFilter,resources:this.state.resources,clearFilter:this.clearFilter,filters:this.state.filter}),r.a.createElement(G,{tasks:t,resources:this.state.resources,name:this.state.file?this.state.file.name:null})),r.a.createElement(E,null))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.d5eb90c6.chunk.js.map